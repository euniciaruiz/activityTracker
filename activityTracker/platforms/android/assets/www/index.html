<!doctype html>
    <html lang="en">
        <head>
            <meta charset="utf-8">
            <meta name="viewport" content="width=device-width, initial-scale=1">
            <title>Home</title>
            <style>
            .error{
                font-size: 0.8em;
                border: 1px solid;
                margin: 10px 0px;
                padding:15px 10px 15px 8px;
                text-align:center;
                color: #D8000C;
                background-color: #FFBABA;
            }
            </style>
            <script type="text/javascript" charset="utf-8">
             
            $(document).ready(function(){
            	document.addEventListener("deviceready", onDeviceReady, false);
                 
                var db = window.openDatabase("Database", "1.0", "MyContactsDB", 200000);
 
                function onDeviceReady(){
                    //Populate the databse
                    db.transaction(populateDB, errorCB, successCB);
                    //Override the back button functionality
                    document.addEventListener('backbutton', onBack, false);
                }
                 
                function onBack(){
                    //If the current page is index page then exit other wise navigate to index page
                    if($.mobile.activePage.is('#index')){
                        navigator.app.exitApp();
                    }
                    else{
                        db.transaction(queryDB, errorCB);
                    }
                }

                function errorCB(err){
 
                } 

                $(".refresh").bind("click", function (event){
                    db.transaction(queryDB, errorCB);
                });

                $(".back").bind("click", function (event){
                    resetForm();
                    db.transaction(queryDB, errorCB);
                });

                $("#index [data-role='content'] ul").on('tap taphold', 'li', function (event){
                    event.preventDefault();
                    event.stopImmediatePropagation();
                    var liId = this.id;

                    if (event.type === 'taphold'){
                        navigator.notification.vibrate(30);
                        var $popup = $('#actionList-popup');
                        $("#actionList").html('');
                        $("#actionList").append('<li id="delete&'+liId+'">Delete</li>').listview('refresh');
                        $popup.popup();
                        $popup.popup('open');
                        $("#tapHoldCheck").val('true');
                    }
                    else if (event.type === 'tap'){
                    }
                });

<<<<<<< HEAD
  <script src="js/jquery-1.8.3.js"></script>
  <script src="js/jquery.mobile-1.2.0.js"></script>
  <script src="js/model.js"></script>
</body>

</html>
=======
                //Change the hidden field value when the popup is closed
                $('#actionList-popup').bind({
                    popupafterclose: function(event, ui){
                        $("#tapHoldCheck").val('');
                    }
                });
  

                $("#index [data-role='popup'] ul").on('click', 'li', function (event){
                    var action_liId = this.id.split('&');
                    var action = action_liId[0];
                    var id = action_liId[1];

                    if (action == 'delete'){
                        navigator.notification.confirm(
                            'Are you sure?',
                            function(buttonIndex){onConfirm(buttonIndex, id);},
                            'Delete Contact',
                            'Ok, Cancel'
                        );
                    }
                });

                function onConfirm(buttonIndex, id){
                    if (buttonIndex === 1){ //Delete
                        db.transaction(function (tx){ tx.executeSql("DELETE FROM MyContacts WHERE id=?", [id], queryDB, errorCB); });
                    }
                    if (buttonIndex === 2){
                        $.mobile.changePage($("#index"), { transition : "slide"});
                    }
                }
            });
            </script>
        </head>
    <body>
>>>>>>> 50a63562bd6fc35b3a871d715797080dd18b23cb
